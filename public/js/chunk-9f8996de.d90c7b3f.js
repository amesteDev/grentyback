(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9f8996de"],{"129f":function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},"14c3":function(e,t,n){var r=n("c6b6"),i=n("9263");e.exports=function(e,t){var n=e.exec;if("function"===typeof n){var c=n.call(e,t);if("object"!==typeof c)throw TypeError("RegExp exec method returned something other than an Object or null");return c}if("RegExp"!==r(e))throw TypeError("RegExp#exec called on incompatible receiver");return i.call(e,t)}},"1dde":function(e,t,n){var r=n("d039"),i=n("b622"),c=n("2d00"),a=i("species");e.exports=function(e){return c>=51||!r((function(){var t=[],n=t.constructor={};return n[a]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},2532:function(e,t,n){"use strict";var r=n("23e7"),i=n("5a34"),c=n("1d80"),a=n("ab13");r({target:"String",proto:!0,forced:!a("includes")},{includes:function(e){return!!~String(c(this)).indexOf(i(e),arguments.length>1?arguments[1]:void 0)}})},"2d3b":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h2",[e._v("SÖk maskin")]),e.error?n("div",[n("p",[e._v(e._s(e.error))])]):e._e(),e.search?n("div",[e._m(0),n("h3",[e._v("Filtrera på ort:")]),e._l(e.citys,(function(t){return n("div",{key:t},[e._v(" "+e._s(t)+" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.checkedCitys,expression:"checkedCitys"}],attrs:{type:"checkbox"},domProps:{value:t,checked:Array.isArray(e.checkedCitys)?e._i(e.checkedCitys,t)>-1:e.checkedCitys},on:{change:function(n){var r=e.checkedCitys,i=n.target,c=!!i.checked;if(Array.isArray(r)){var a=t,s=e._i(r,a);i.checked?s<0&&(e.checkedCitys=r.concat([a])):s>-1&&(e.checkedCitys=r.slice(0,s).concat(r.slice(s+1)))}else e.checkedCitys=c}}})])})),n("h3",[e._v("Filtrera på maskintyp:")]),e._l(e.machineTypes,(function(t){return n("div",{key:t},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.checkedMachines,expression:"checkedMachines"}],attrs:{type:"checkbox"},domProps:{value:t,checked:Array.isArray(e.checkedMachines)?e._i(e.checkedMachines,t)>-1:e.checkedMachines},on:{change:function(n){var r=e.checkedMachines,i=n.target,c=!!i.checked;if(Array.isArray(r)){var a=t,s=e._i(r,a);i.checked?s<0&&(e.checkedMachines=r.concat([a])):s>-1&&(e.checkedMachines=r.slice(0,s).concat(r.slice(s+1)))}else e.checkedMachines=c}}}),e._v(e._s(t)+" ")])})),n("h3",[e._v("Sortera din sökning")]),n("select",{directives:[{name:"model",rawName:"v-model",value:e.filtertype,expression:"filtertype"}],attrs:{name:"filtertype",id:"filtertype"},on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.filtertype=t.target.multiple?n:n[0]}}},[n("option",{attrs:{value:"price"}},[e._v("Pris")]),n("option",{attrs:{value:"distance"}},[e._v("Avstånd")])]),n("br"),e._l(e.filteredList,(function(t){return n("div",{key:t.id,staticClass:"search-hit",attrs:{value:t.id}},[n("router-link",{staticClass:"search-link",attrs:{to:"/info/"+t.owner+"/"+t.id}},[n("div",{staticClass:"search-hit-inner"},[n("p",[n("span",{staticClass:"search-title"},[e._v(" Maskintyp:")]),e._v(" "+e._s(t.machineName))]),n("p",[n("span",{staticClass:"search-title"},[e._v("Pris:")]),e._v(" "+e._s(t.price)+" / timme")]),n("p",[n("span",{staticClass:"search-title"},[e._v("Finns i:")]),e._v(" "+e._s(t.city))])])])],1)}))],2):n("div",[n("p",[e._v(" Välj först vilken län du vill söka i, sedan vilken kommun i det länet (lämnas kommun tomt görs en sökning på hela länet) ")]),e.error?n("div",[n("p",[e._v(e._s(e.error))])]):e._e(),n("form",{attrs:{id:"app",method:"post"},on:{submit:e.checkForm}},[n("select",{directives:[{name:"model",rawName:"v-model",value:e.county,expression:"county"}],staticClass:"search-boxes",attrs:{name:"county",id:"county"},on:{change:[function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.county=t.target.multiple?n:n[0]},function(t){return e.selectLan()}]}},e._l(e.lan,(function(t){return n("option",{key:t.code,domProps:{value:t.code}},[e._v(" "+e._s(t.name)+" ")])})),0),e.selectedKommuner.length>0?n("div",[n("select",{directives:[{name:"model",rawName:"v-model",value:e.kommun,expression:"kommun"}],staticClass:"search-boxes",attrs:{name:"kommun",id:"kommun",placeholder:"Välj kommun..."},on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.kommun=t.target.multiple?n:n[0]}}},e._l(e.selectedKommuner,(function(t){return n("option",{key:t.code,domProps:{value:t.name}},[e._v(" "+e._s(t.name)+" ")])})),0)]):e._e(),n("button",{staticClass:"button",attrs:{type:"sumbit",value:"submit"}},[e._v("Sök")])])])])},i=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"filterbox"},[n("h2",[e._v("Filtrera sökresultat:")])])}],c=(n("ac1f"),n("841c"),n("4fad"),n("caad"),n("2532"),n("7db0"),n("4de4"),n("d81d"),n("bc3a")),a=n.n(c),s=n("5393"),o=n("29ca"),u={data:function(){return{search:null,kommuner:o,selectedKommuner:{},lan:s,county:null,kommun:null,error:null,citys:[],machineTypes:[],checkedMachines:[],checkedCitys:[],filtertype:"price"}},methods:{checkForm:function(e){e.preventDefault(),this.fetchInKommun()},fetchInKommun:function(){var e=this;a.a.post("http://localhost:3000/search",{lan:this.county},{headers:{Authorization:"Bearer "+localStorage.token}}).then((function(t){t.data.err?e.error=t.data.msg:(e.search=t.data,e.calculateDistance(t.data),e.filterGeneration())}))},filterGeneration:function(){for(var e=0,t=Object.entries(this.search);e<t.length;e++){var n=t[e];for(var r in this.citys.includes(n[1].city)||(this.citys.push(n[1].city),this.checkedCitys.push(n[1].city)),n[1].machines)this.machineTypes.includes(n[1].machines[r].machineName)||this.machineTypes.push(n[1].machines[r].machineName)}this.filteredSearch=this.search},selectLan:function(){var e=this;this.selectedKommuner=this.kommuner.find((function(t){return t.code==e.county})).kommuner},calculateDistance:function(e){for(var t=0;t<e.length;t++){var n=e[t].latitude,r=localStorage.latitude,i=e[t].longitude,c=localStorage.longitude,a=6371,s=this.deg2rad(r-n),o=this.deg2rad(c-i),u=Math.sin(s/2)*Math.sin(s/2)+Math.cos(this.deg2rad(n))*Math.cos(this.deg2rad(r))*Math.sin(o/2)*Math.sin(o/2),l=2*Math.atan2(Math.sqrt(u),Math.sqrt(1-u)),d=a*l;e[t].distance=d}},deg2rad:function(e){return e*(Math.PI/180)}},computed:{filteredList:function(){var e,t=this;return e=this.checkedMachines.length?this.search.filter((function(e){return e.machines.some((function(n){return t.checkedMachines.includes(n.machineName)&&t.checkedCitys.includes(e.city)}))})).map((function(e){var n=Object.assign({},e);return n.machines=n.machines.filter((function(e){return t.checkedMachines.includes(e.machineName)})),n})):this.search.filter((function(e){return t.checkedCitys.includes(e.city)})),"price"==this.filtertype?e.sort((function(e,t){return e.price-t.price})):"distance"==this.filtertype?e.sort((function(e,t){return e.distance-t.distance})):e}}},l=u,d=n("2877"),f=Object(d["a"])(l,r,i,!1,null,"6df25bdb",null);t["default"]=f.exports},"44e7":function(e,t,n){var r=n("861d"),i=n("c6b6"),c=n("b622"),a=c("match");e.exports=function(e){var t;return r(e)&&(void 0!==(t=e[a])?!!t:"RegExp"==i(e))}},"4de4":function(e,t,n){"use strict";var r=n("23e7"),i=n("b727").filter,c=n("1dde"),a=c("filter");r({target:"Array",proto:!0,forced:!a},{filter:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},"4fad":function(e,t,n){var r=n("23e7"),i=n("6f53").entries;r({target:"Object",stat:!0},{entries:function(e){return i(e)}})},"5a34":function(e,t,n){var r=n("44e7");e.exports=function(e){if(r(e))throw TypeError("The method doesn't accept regular expressions");return e}},"65f0":function(e,t,n){var r=n("861d"),i=n("e8b5"),c=n("b622"),a=c("species");e.exports=function(e,t){var n;return i(e)&&(n=e.constructor,"function"!=typeof n||n!==Array&&!i(n.prototype)?r(n)&&(n=n[a],null===n&&(n=void 0)):n=void 0),new(void 0===n?Array:n)(0===t?0:t)}},"6f53":function(e,t,n){var r=n("83ab"),i=n("df75"),c=n("fc6a"),a=n("d1e7").f,s=function(e){return function(t){var n,s=c(t),o=i(s),u=o.length,l=0,d=[];while(u>l)n=o[l++],r&&!a.call(s,n)||d.push(e?[n,s[n]]:s[n]);return d}};e.exports={entries:s(!0),values:s(!1)}},"7db0":function(e,t,n){"use strict";var r=n("23e7"),i=n("b727").find,c=n("44d2"),a="find",s=!0;a in[]&&Array(1)[a]((function(){s=!1})),r({target:"Array",proto:!0,forced:s},{find:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),c(a)},"841c":function(e,t,n){"use strict";var r=n("d784"),i=n("825a"),c=n("1d80"),a=n("129f"),s=n("14c3");r("search",1,(function(e,t,n){return[function(t){var n=c(this),r=void 0==t?void 0:t[e];return void 0!==r?r.call(t,n):new RegExp(t)[e](String(n))},function(e){var r=n(t,e,this);if(r.done)return r.value;var c=i(e),o=String(this),u=c.lastIndex;a(u,0)||(c.lastIndex=0);var l=s(c,o);return a(c.lastIndex,u)||(c.lastIndex=u),null===l?-1:l.index}]}))},9263:function(e,t,n){"use strict";var r=n("ad6d"),i=n("9f7f"),c=n("5692"),a=RegExp.prototype.exec,s=c("native-string-replace",String.prototype.replace),o=a,u=function(){var e=/a/,t=/b*/g;return a.call(e,"a"),a.call(t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),l=i.UNSUPPORTED_Y||i.BROKEN_CARET,d=void 0!==/()??/.exec("")[1],f=u||d||l;f&&(o=function(e){var t,n,i,c,o=this,f=l&&o.sticky,h=r.call(o),p=o.source,v=0,m=e;return f&&(h=h.replace("y",""),-1===h.indexOf("g")&&(h+="g"),m=String(e).slice(o.lastIndex),o.lastIndex>0&&(!o.multiline||o.multiline&&"\n"!==e[o.lastIndex-1])&&(p="(?: "+p+")",m=" "+m,v++),n=new RegExp("^(?:"+p+")",h)),d&&(n=new RegExp("^"+p+"$(?!\\s)",h)),u&&(t=o.lastIndex),i=a.call(f?n:o,m),f?i?(i.input=i.input.slice(v),i[0]=i[0].slice(v),i.index=o.lastIndex,o.lastIndex+=i[0].length):o.lastIndex=0:u&&i&&(o.lastIndex=o.global?i.index+i[0].length:t),d&&i&&i.length>1&&s.call(i[0],n,(function(){for(c=1;c<arguments.length-2;c++)void 0===arguments[c]&&(i[c]=void 0)})),i}),e.exports=o},"9f7f":function(e,t,n){"use strict";var r=n("d039");function i(e,t){return RegExp(e,t)}t.UNSUPPORTED_Y=r((function(){var e=i("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),t.BROKEN_CARET=r((function(){var e=i("^r","gy");return e.lastIndex=2,null!=e.exec("str")}))},ab13:function(e,t,n){var r=n("b622"),i=r("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[i]=!1,"/./"[e](t)}catch(r){}}return!1}},ac1f:function(e,t,n){"use strict";var r=n("23e7"),i=n("9263");r({target:"RegExp",proto:!0,forced:/./.exec!==i},{exec:i})},ad6d:function(e,t,n){"use strict";var r=n("825a");e.exports=function(){var e=r(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},b727:function(e,t,n){var r=n("0366"),i=n("44ad"),c=n("7b0b"),a=n("50c4"),s=n("65f0"),o=[].push,u=function(e){var t=1==e,n=2==e,u=3==e,l=4==e,d=6==e,f=7==e,h=5==e||d;return function(p,v,m,y){for(var g,x,k=c(p),_=i(k),b=r(v,m,3),E=a(_.length),A=0,C=y||s,M=t?C(p,E):n||f?C(p,0):void 0;E>A;A++)if((h||A in _)&&(g=_[A],x=b(g,A,k),e))if(t)M[A]=x;else if(x)switch(e){case 3:return!0;case 5:return g;case 6:return A;case 2:o.call(M,g)}else switch(e){case 4:return!1;case 7:o.call(M,g)}return d?-1:u||l?l:M}};e.exports={forEach:u(0),map:u(1),filter:u(2),some:u(3),every:u(4),find:u(5),findIndex:u(6),filterOut:u(7)}},caad:function(e,t,n){"use strict";var r=n("23e7"),i=n("4d64").includes,c=n("44d2");r({target:"Array",proto:!0},{includes:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),c("includes")},d784:function(e,t,n){"use strict";n("ac1f");var r=n("6eeb"),i=n("d039"),c=n("b622"),a=n("9112"),s=c("species"),o=!i((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),u=function(){return"$0"==="a".replace(/./,"$0")}(),l=c("replace"),d=function(){return!!/./[l]&&""===/./[l]("a","$0")}(),f=!i((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));e.exports=function(e,t,n,l){var h=c(e),p=!i((function(){var t={};return t[h]=function(){return 7},7!=""[e](t)})),v=p&&!i((function(){var t=!1,n=/a/;return"split"===e&&(n={},n.constructor={},n.constructor[s]=function(){return n},n.flags="",n[h]=/./[h]),n.exec=function(){return t=!0,null},n[h](""),!t}));if(!p||!v||"replace"===e&&(!o||!u||d)||"split"===e&&!f){var m=/./[h],y=n(h,""[e],(function(e,t,n,r,i){return t.exec===RegExp.prototype.exec?p&&!i?{done:!0,value:m.call(t,n,r)}:{done:!0,value:e.call(n,t,r)}:{done:!1}}),{REPLACE_KEEPS_$0:u,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:d}),g=y[0],x=y[1];r(String.prototype,e,g),r(RegExp.prototype,h,2==t?function(e,t){return x.call(e,this,t)}:function(e){return x.call(e,this)})}l&&a(RegExp.prototype[h],"sham",!0)}},d81d:function(e,t,n){"use strict";var r=n("23e7"),i=n("b727").map,c=n("1dde"),a=c("map");r({target:"Array",proto:!0,forced:!a},{map:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},e8b5:function(e,t,n){var r=n("c6b6");e.exports=Array.isArray||function(e){return"Array"==r(e)}}}]);
//# sourceMappingURL=chunk-9f8996de.d90c7b3f.js.map